<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Golang on gobai's blog</title><link>/posts/golang/</link><description>Recent content in Golang on gobai's blog</description><generator>Hugo</generator><language>en-us</language><atom:link href="/posts/golang/index.xml" rel="self" type="application/rss+xml"/><item><title>sqlx vs xorm</title><link>/posts/sqlx-vs-xorm/</link><pubDate>Sat, 09 Mar 2024 10:49:09 +0800</pubDate><guid>/posts/sqlx-vs-xorm/</guid><description>&lt;h2 id="åˆå§‹åŒ–æ¼”ç¤ºç¯å¢ƒ">
 åˆå§‹åŒ–æ¼”ç¤ºç¯å¢ƒ
 &lt;a class="anchor" href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%bc%94%e7%a4%ba%e7%8e%af%e5%a2%83">#&lt;/a>
&lt;/h2>
&lt;h3 id="ä½¿ç”¨dockeréƒ¨ç½²">
 ä½¿ç”¨dockeréƒ¨ç½²
 &lt;a class="anchor" href="#%e4%bd%bf%e7%94%a8docker%e9%83%a8%e7%bd%b2">#&lt;/a>
&lt;/h3>
&lt;p>éƒ¨ç½²çš„å½“å‰æ—¶é—´æœ€æ–°ç‰ˆæœ¬&lt;code>postgres:16.2&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -d --name pgsql &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -e POSTGRES_USER&lt;span style="color:#f92672">=&lt;/span>admin &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -e POSTGRES_PASSWORD&lt;span style="color:#f92672">=&lt;/span>admin &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -e POSTGRES_DB&lt;span style="color:#f92672">=&lt;/span>testdb &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p 15432:5432 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> postgres:16.2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä½¿ç”¨psqlè¿æ¥">
 ä½¿ç”¨&lt;code>psql&lt;/code>è¿æ¥
 &lt;a class="anchor" href="#%e4%bd%bf%e7%94%a8psql%e8%bf%9e%e6%8e%a5">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker exec -it pgsql psql -U admin -d testdb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åˆå§‹åŒ–uservpså’Œhostè¡¨">
 åˆå§‹åŒ–&lt;code>user&lt;/code>,&lt;code>vps&lt;/code>å’Œ&lt;code>host&lt;/code>è¡¨
 &lt;a class="anchor" href="#%e5%88%9d%e5%a7%8b%e5%8c%96uservps%e5%92%8chost%e8%a1%a8">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id bigserial &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> username VARCHAR(&lt;span style="color:#ae81ff">255&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> password VARCHAR(&lt;span style="color:#ae81ff">255&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#e6db74">&amp;#34;host&amp;#34;&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id bigserial &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hostname VARCHAR(&lt;span style="color:#ae81ff">255&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#e6db74">&amp;#34;vps&amp;#34;&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id bigserial &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user_id bigint &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> host_id bigint &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name VARCHAR(&lt;span style="color:#ae81ff">255&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sys_disk jsonb &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;{}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æŸ¥çœ‹åˆ›å»ºå‡ºçš„è¡¨">
 æŸ¥çœ‹åˆ›å»ºå‡ºçš„è¡¨
 &lt;a class="anchor" href="#%e6%9f%a5%e7%9c%8b%e5%88%9b%e5%bb%ba%e5%87%ba%e7%9a%84%e8%a1%a8">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>testdb&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#75715e"># \z&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Access privileges
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Schema | Name | Type | Access privileges | Column privileges | Policies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>--------+-------------+----------+-------------------+-------------------+----------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public | host | table | | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public | host_id_seq | sequence | | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public | user | table | | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public | user_id_seq | sequence | | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public | vps | table | | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> public | vps_id_seq | sequence | | |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#ae81ff">6&lt;/span> rows&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testdb&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#75715e"># \d user&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Table &lt;span style="color:#e6db74">&amp;#34;public.user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Column | Type | Collation | Nullable | Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>----------+------------------------+-----------+----------+----------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id | bigint | | not null | nextval&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#e6db74">&amp;#39;user_id_seq&amp;#39;&lt;/span>::regclass&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> username | character varying&lt;span style="color:#f92672">(&lt;/span>255&lt;span style="color:#f92672">)&lt;/span> | | not null |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> password | character varying&lt;span style="color:#f92672">(&lt;/span>255&lt;span style="color:#f92672">)&lt;/span> | | not null |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Indexes:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;user_pkey&amp;#34;&lt;/span> PRIMARY KEY, btree &lt;span style="color:#f92672">(&lt;/span>id&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testdb&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#75715e"># \d host&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Table &lt;span style="color:#e6db74">&amp;#34;public.host&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Column | Type | Collation | Nullable | Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>----------+------------------------+-----------+----------+----------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id | bigint | | not null | nextval&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#e6db74">&amp;#39;host_id_seq&amp;#39;&lt;/span>::regclass&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hostname | character varying&lt;span style="color:#f92672">(&lt;/span>255&lt;span style="color:#f92672">)&lt;/span> | | not null |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Indexes:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;host_pkey&amp;#34;&lt;/span> PRIMARY KEY, btree &lt;span style="color:#f92672">(&lt;/span>id&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>testdb&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#75715e"># \d vps&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Table &lt;span style="color:#e6db74">&amp;#34;public.vps&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Column | Type | Collation | Nullable | Default
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>----------+------------------------+-----------+----------+---------------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> id | bigint | | not null | nextval&lt;span style="color:#f92672">(&lt;/span>&lt;span style="color:#e6db74">&amp;#39;vps_id_seq&amp;#39;&lt;/span>::regclass&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user_id | bigint | | not null |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> host_id | bigint | | not null |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> name | character varying&lt;span style="color:#f92672">(&lt;/span>255&lt;span style="color:#f92672">)&lt;/span> | | not null |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sys_disk | jsonb | | not null | &lt;span style="color:#e6db74">&amp;#39;{}&amp;#39;&lt;/span>::jsonb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Indexes:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;vps_pkey&amp;#34;&lt;/span> PRIMARY KEY, btree &lt;span style="color:#f92672">(&lt;/span>id&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="åˆå§‹åŒ–æ•°æ®">
 åˆå§‹åŒ–æ•°æ®
 &lt;a class="anchor" href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%95%b0%e6%8d%ae">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- æ’å…¥ç”¨æˆ·æ•°æ®
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span> (username, password) &lt;span style="color:#66d9ef">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;user1&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;password1&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;user2&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;password2&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- æ’å…¥ä¸»æœºæ•°æ®
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> &lt;span style="color:#e6db74">&amp;#34;host&amp;#34;&lt;/span> (hostname) &lt;span style="color:#66d9ef">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;host1&amp;#39;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (&lt;span style="color:#e6db74">&amp;#39;host2&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- user1 åœ¨ host1 ä¸Šåˆ›å»ºä¸€ä¸ª VPS
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> &lt;span style="color:#e6db74">&amp;#34;vps&amp;#34;&lt;/span> (user_id, host_id, name, sys_disk) &lt;span style="color:#66d9ef">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> username &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;user1&amp;#39;&lt;/span>), (&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#66d9ef">host&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> hostname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;host1&amp;#39;&lt;/span>), &lt;span style="color:#e6db74">&amp;#39;vps_user1_host1&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;disk_size&amp;#34;: 50}&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- user2 åœ¨ host1 ä¸Šåˆ›å»ºä¸€ä¸ª VPS
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> &lt;span style="color:#e6db74">&amp;#34;vps&amp;#34;&lt;/span> (user_id, host_id, name, sys_disk) &lt;span style="color:#66d9ef">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> username &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;user2&amp;#39;&lt;/span>), (&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#66d9ef">host&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> hostname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;host1&amp;#39;&lt;/span>), &lt;span style="color:#e6db74">&amp;#39;vps_user2_host1&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;disk_size&amp;#34;: 60}&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- user1 åœ¨ host2 ä¸Šåˆ›å»ºä¸€ä¸ª VPS
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> &lt;span style="color:#e6db74">&amp;#34;vps&amp;#34;&lt;/span> (user_id, host_id, name, sys_disk) &lt;span style="color:#66d9ef">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> username &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;user1&amp;#39;&lt;/span>), (&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#66d9ef">host&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> hostname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;host2&amp;#39;&lt;/span>), &lt;span style="color:#e6db74">&amp;#39;vps_user1_host2&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;disk_size&amp;#34;: 70}&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- user2 åœ¨ host2 ä¸Šåˆ›å»ºä¸€ä¸ª VPS
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> &lt;span style="color:#e6db74">&amp;#34;vps&amp;#34;&lt;/span> (user_id, host_id, name, sys_disk) &lt;span style="color:#66d9ef">VALUES&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> username &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;user2&amp;#39;&lt;/span>), (&lt;span style="color:#66d9ef">SELECT&lt;/span> id &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#66d9ef">host&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> hostname &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;host2&amp;#39;&lt;/span>), &lt;span style="color:#e6db74">&amp;#39;vps_user2_host2&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;disk_size&amp;#34;: 80}&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å…³äº-databasesql">
 å…³äº &lt;code>database/sql&lt;/code>
 &lt;a class="anchor" href="#%e5%85%b3%e4%ba%8e-databasesql">#&lt;/a>
&lt;/h2>
&lt;p>&lt;code>database/sql&lt;/code>æä¾›äº†æ“ä½œSQLæ•°æ®åº“çš„é€šç”¨æ¥å£, éœ€è¦ç»“åˆ&lt;code>database driver&lt;/code>åŒæ—¶ä½¿ç”¨, è¿™é‡Œæ˜¯ä¸€äº›&lt;a href="https://go.dev/wiki/SQLDrivers">é©±åŠ¨åˆ—è¡¨&lt;/a>&lt;/p></description></item><item><title>è§£å†³Goåº”ç”¨åœ¨å®¹å™¨ä¸­çš„æ—¶åŒºé—®é¢˜</title><link>/posts/solve-timezone-issue-in-go-application-in-container/</link><pubDate>Sat, 18 Feb 2023 16:12:01 +0800</pubDate><guid>/posts/solve-timezone-issue-in-go-application-in-container/</guid><description>&lt;h2 id="å®¹å™¨ä¸­çš„æ—¶åŒºé—®é¢˜">
 å®¹å™¨ä¸­çš„æ—¶åŒºé—®é¢˜
 &lt;a class="anchor" href="#%e5%ae%b9%e5%99%a8%e4%b8%ad%e7%9a%84%e6%97%b6%e5%8c%ba%e9%97%ae%e9%a2%98">#&lt;/a>
&lt;/h2>
&lt;p>åº”ç”¨ç›´æ¥è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šéœ€è¦è®¾ç½®æœåŠ¡å™¨æ—¶åŒºä¸ºä¸œå…«åŒºï¼Œç°åœ¨å¾ˆå¤šåº”ç”¨éƒ½æ˜¯éƒ¨ç½²åœ¨å®¹å™¨ä¸­äº†ï¼ŒåŒæ ·ä¹Ÿæ˜¯è¦è®¾ç½®å®¹å™¨é•œåƒçš„æ—¶åŒºã€‚&lt;/p>
&lt;p>è®¸å¤šå®¹å™¨é•œåƒé»˜è®¤æ—¶åŒºä¸º &lt;code>UTC&lt;/code> (&lt;a href="https://zh.wikipedia.org/zh-hans/%E5%8D%8F%E8%B0%83%E4%B8%96%E7%95%8C%E6%97%B6">Coordinated Universal Time åè°ƒä¸–ç•Œæ—¶&lt;/a>)ï¼Œæ¯”ä¸œå…«åŒºæ…¢å…«ä¸ªå°æ—¶ï¼Œå½“ç¨‹åºæ¶‰åŠæ•°æ®åº“å†™å…¥æ“ä½œæˆ–è€…æ—¥å¿—è®°å½•ç­‰åŠŸèƒ½æ—¶å°±ä¼šæœ‰æ—¶é—´å·®ã€‚&lt;/p>
&lt;p>å¸¸è§„è§£å†³æ–¹æ¡ˆä¸€èˆ¬ä¸¤å¤§ç±»&lt;/p>
&lt;ol>
&lt;li>build dockeré•œåƒæ—¶å°±æŠŠé•œåƒå†…çš„æ—¶åŒºè®¾ç½®ä¸º &lt;code>Asia/Shanghai&lt;/code>&lt;/li>
&lt;li>è¿è¡Œå®¹å™¨æ—¶æŠŠæœ¬åœ°æ—¶åŒºæ­£å¸¸çš„ä¸»æœºçš„æ—¶åŒºé…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="çœ‹ä¸€ä¸‹-go-æ˜¯å¦‚ä½•è¯»å–æ—¶åŒºæ–‡ä»¶å¹¶è®¾ç½®-timetime-çš„æ—¶åŒºçš„">
 çœ‹ä¸€ä¸‹ &lt;code>Go&lt;/code> æ˜¯å¦‚ä½•è¯»å–æ—¶åŒºæ–‡ä»¶å¹¶è®¾ç½® &lt;code>time.Time&lt;/code> çš„æ—¶åŒºçš„
 &lt;a class="anchor" href="#%e7%9c%8b%e4%b8%80%e4%b8%8b-go-%e6%98%af%e5%a6%82%e4%bd%95%e8%af%bb%e5%8f%96%e6%97%b6%e5%8c%ba%e6%96%87%e4%bb%b6%e5%b9%b6%e8%ae%be%e7%bd%ae-timetime-%e7%9a%84%e6%97%b6%e5%8c%ba%e7%9a%84">#&lt;/a>
&lt;/h3>
&lt;p>&lt;code>Go&lt;/code> æºç  &lt;a href="https://github.com/golang/go/blob/master/src/time/zoneinfo_unix.go">src/time/zoneinfo_unix.go&lt;/a> ä¸­ä»£ç å’Œæ³¨é‡Šéƒ½å¾ˆæ¸…æ™°ğŸ‘&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">time&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;syscall&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// Many systems use /usr/share/zoneinfo, Solaris 2 has&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// /usr/share/lib/zoneinfo, IRIX 6 has /usr/lib/locale/TZ,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">// NixOS has /etc/zoneinfo.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">platformZoneSources&lt;/span> = []&lt;span style="color:#66d9ef">string&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;/usr/share/zoneinfo/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;/usr/share/lib/zoneinfo/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;/usr/lib/locale/TZ/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;/etc/zoneinfo&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">initLocal&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// consult $TZ to find the time zone to use.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// no $TZ means use the system default /etc/localtime.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// $TZ=&amp;#34;&amp;#34; means use UTC.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// $TZ=&amp;#34;foo&amp;#34; or $TZ=&amp;#34;:foo&amp;#34; if foo is an absolute path, then the file pointed&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// by foo will be used to initialize timezone; otherwise, file&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// /usr/share/zoneinfo/foo will be used.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tz&lt;/span>, &lt;span style="color:#a6e22e">ok&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">syscall&lt;/span>.&lt;span style="color:#a6e22e">Getenv&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;TZ&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">switch&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">case&lt;/span> !&lt;span style="color:#a6e22e">ok&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">z&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">loadLocation&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;localtime&amp;#34;&lt;/span>, []&lt;span style="color:#66d9ef">string&lt;/span>{&lt;span style="color:#e6db74">&amp;#34;/etc&amp;#34;&lt;/span>})
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span> = &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">z&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;Local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span>[&lt;span style="color:#ae81ff">0&lt;/span>] &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;:&amp;#39;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tz&lt;/span> = &lt;span style="color:#a6e22e">tz&lt;/span>[&lt;span style="color:#ae81ff">1&lt;/span>:]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span>[&lt;span style="color:#ae81ff">0&lt;/span>] &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#39;/&amp;#39;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">z&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">loadLocation&lt;/span>(&lt;span style="color:#a6e22e">tz&lt;/span>, []&lt;span style="color:#66d9ef">string&lt;/span>{&lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span>}); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span> = &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">z&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;/etc/localtime&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;Local&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#a6e22e">tz&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> &lt;span style="color:#a6e22e">tz&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;UTC&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#a6e22e">z&lt;/span>, &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">:=&lt;/span> &lt;span style="color:#a6e22e">loadLocation&lt;/span>(&lt;span style="color:#a6e22e">tz&lt;/span>, &lt;span style="color:#a6e22e">platformZoneSources&lt;/span>); &lt;span style="color:#a6e22e">err&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#66d9ef">nil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span> = &lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#a6e22e">z&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// Fall back to UTC.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">localLoc&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;UTC&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é¦–å…ˆæ£€æŸ¥æ˜¯å¦è®¾ç½®äº† &lt;code>TZ&lt;/code> ç¯å¢ƒå˜é‡&lt;/p></description></item><item><title>å‡å°goç¨‹åºç¼–è¯‘åçš„ä½“ç§¯</title><link>/posts/go-app-reduce-size/</link><pubDate>Mon, 22 Nov 2021 10:29:02 +0800</pubDate><guid>/posts/go-app-reduce-size/</guid><description>&lt;h2 id="ç¼–è¯‘ç»å…¸ç¨‹åº">
 ç¼–è¯‘ç»å…¸ç¨‹åº
 &lt;a class="anchor" href="#%e7%bc%96%e8%af%91%e7%bb%8f%e5%85%b8%e7%a8%8b%e5%ba%8f">#&lt;/a>
&lt;/h2>
&lt;h3 id="ç¨‹åºä»£ç ">
 ç¨‹åºä»£ç 
 &lt;a class="anchor" href="#%e7%a8%8b%e5%ba%8f%e4%bb%a3%e7%a0%81">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-golang" data-lang="golang">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Hello World.&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ç¼–è¯‘ç¯å¢ƒ">
 ç¼–è¯‘ç¯å¢ƒ
 &lt;a class="anchor" href="#%e7%bc%96%e8%af%91%e7%8e%af%e5%a2%83">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ go version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>go version go1.16.7 linux/amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="0-ç›´æ¥ç¼–è¯‘">
 0. ç›´æ¥ç¼–è¯‘
 &lt;a class="anchor" href="#0-%e7%9b%b4%e6%8e%a5%e7%bc%96%e8%af%91">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ go build -o helloword main.go
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ls -lh helloword 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rwxrwxr-x &lt;span style="color:#ae81ff">1&lt;/span> gobai gobai 1.9M Nov &lt;span style="color:#ae81ff">23&lt;/span> 09:34 helloword
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="1-ä¿®æ”¹ç¼–è¯‘é€‰é¡¹">
 1. ä¿®æ”¹ç¼–è¯‘é€‰é¡¹
 &lt;a class="anchor" href="#1-%e4%bf%ae%e6%94%b9%e7%bc%96%e8%af%91%e9%80%89%e9%a1%b9">#&lt;/a>
&lt;/h2>
&lt;p>é™¤å»ç¼–è¯‘æ—¶å¸¦çš„ç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>$ go build -ldflags&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;-s -w&amp;#34;&lt;/span> -o helloword main.go
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ ls -lh helloword 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rwxrwxr-x &lt;span style="color:#ae81ff">1&lt;/span> gobai gobai 1.3M Nov &lt;span style="color:#ae81ff">23&lt;/span> 09:38 helloword
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="2-ä½¿ç”¨-upx">
 2. ä½¿ç”¨ &lt;code>UPX&lt;/code>
 &lt;a class="anchor" href="#2-%e4%bd%bf%e7%94%a8-upx">#&lt;/a>
&lt;/h2>
&lt;p>å¯¹ç›´æ¥ç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶ä½¿ç”¨ &lt;a href="https://github.com/upx/upx">upx&lt;/a> è¿›ä¸€æ­¥å‹ç¼©&lt;/p></description></item></channel></rss>