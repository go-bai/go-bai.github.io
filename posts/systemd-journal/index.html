<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>About Systemd | gobai's blog</title>
<link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/xcode.min.css rel=stylesheet><style>h2::before,h3::before,h4::before,h5::before{color:#8f8f8f}h2::before{content:"## "}h3::before{content:"### "}h4::before{content:"#### "}h5::before{content:"##### "}</style></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/tags/>Tags</a></li><li><a href=/index.xml>Subscribe</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>About Systemd</span></h1><h4 class=date>2021/11/14</h4><p class=terms>Tags: <a href=/tags/linux>linux</a> <a href=/tags/systemd>systemd</a> <a href=/tags/journalctl>journalctl</a></p></div><nav id=TableOfContents><ul><li><a href=#常用过滤日志日志的命令>常用过滤日志日志的命令</a><ul><li><a href=#根据时间约束过滤日志>根据时间约束过滤日志</a><ul><li><a href=#获取-2023-01-15-000000-之后的日志>获取 <code>2023-01-15 00:00:00</code> 之后的日志</a></li><li><a href=#获取-2023-01-15-000000-之后-2023-01-15-120000-之前的日志>获取 <code>2023-01-15 00:00:00</code> 之后, <code>2023-01-15 12:00:00</code> 之前的日志</a></li></ul></li><li><a href=#只查看一个服务unit的日志>只查看一个服务(Unit)的日志</a></li><li><a href=#自由组合约束条件>自由组合约束条件</a></li></ul></li><li><a href=#查看日志占用磁盘量>查看日志占用磁盘量</a></li><li><a href=#删除旧的日志>删除旧的日志</a><ul><li><a href=#只保留最近-一个月-的日志>只保留最近 <code>一个月</code> 的日志</a></li><li><a href=#只保留最近-1g-的日志>只保留最近 <code>1G</code> 的日志</a></li></ul></li><li><a href=#列出所有systemd服务>列出所有systemd服务</a></li></ul></nav><main><p>记录一下查看和操作 <code>systemd</code> 日志的几个常用命令</p><h2 id=常用过滤日志日志的命令>常用过滤日志日志的命令</h2><h3 id=根据时间约束过滤日志>根据时间约束过滤日志</h3><h4 id=获取-2023-01-15-000000-之后的日志>获取 <code>2023-01-15 00:00:00</code> 之后的日志</h4><pre><code class=language-bash>journalctl --since '2023-01-15 00:00:00'
</code></pre><h4 id=获取-2023-01-15-000000-之后-2023-01-15-120000-之前的日志>获取 <code>2023-01-15 00:00:00</code> 之后, <code>2023-01-15 12:00:00</code> 之前的日志</h4><pre><code class=language-bash>journalctl --since '2023-01-15 00:00:00' --until '2023-01-15 12:00:00'
</code></pre><h3 id=只查看一个服务unit的日志>只查看一个服务(Unit)的日志</h3><pre><code class=language-bash>journalctl -u nginx
</code></pre><h3 id=自由组合约束条件>自由组合约束条件</h3><pre><code class=language-bash>journalctl -u nginx --since '2023-01-15 00:00:00' --until '2023-01-15 12:00:00'
</code></pre><h2 id=查看日志占用磁盘量>查看日志占用磁盘量</h2><pre><code class=language-bash>journalctl --disk-usage
</code></pre><pre><code class=language-bash>Output
Archived and active journals take up 3.9G in the file system.
</code></pre><h2 id=删除旧的日志>删除旧的日志</h2><h3 id=只保留最近-一个月-的日志>只保留最近 <code>一个月</code> 的日志</h3><pre><code class=language-bash>journalctl --vacuum-time=1month
</code></pre><h3 id=只保留最近-1g-的日志>只保留最近 <code>1G</code> 的日志</h3><pre><code class=language-bash>journalctl --vacuum-size=1G
</code></pre><h2 id=列出所有systemd服务>列出所有systemd服务</h2><pre><code class=language-bash>systemctl list-units --type=service --all
</code></pre></main><footer><script defer src=https://cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script>hljs.configure({languages:[]}),hljs.highlightAll()</script><hr>© <a href=https://blog.gocn.top>gobai</a> 2021 &ndash; 2024 | <a href=https://github.com/go-bai>Github</a></footer></body></html>