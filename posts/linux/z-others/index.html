<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="/posts/linux/z-others/"><meta property="og:site_name" content="gobai's notes"><meta property="og:title" content="其他"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><title>其他 | gobai's notes</title>
<link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=/posts/linux/z-others/><link rel=stylesheet href=/book.min.434035e7885c7f5d12818bd9f111cf1a0925c6fb78382667381c3d5eda3fb4f1.css><script defer src=/fuse.min.js></script><script defer src=/en.search.min.c928bae9e8efe3bf5fe77360f18140c7dc6165d1eab5c04969c336bfd663d632.js></script><link rel=alternate type=application/rss+xml href=/posts/linux/z-others/index.xml title="gobai's notes"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.ico alt=Logo class=book-icon><span>gobai's notes</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-762c546cfaa9598dcaf49c6a9361dd1f class=toggle>
<label for=section-762c546cfaa9598dcaf49c6a9361dd1f class="flex justify-between"><a role=button>随笔</a></label><ul><li><a href=/notes/exit-status-and-waitpid/>Exit Status 与 waitpid：进程退出状态的内核机制</a></li></ul></li><li><input type=checkbox id=section-6fbaa392869835c97ad5493eff4f5733 class=toggle checked>
<label for=section-6fbaa392869835c97ad5493eff4f5733 class="flex justify-between"><a role=button>博客</a></label><ul><li><span>Golang</span><ul><li><input type=checkbox id=section-98d0efdb3baf67b2c791a7fd1bbf6ca1 class=toggle>
<label for=section-98d0efdb3baf67b2c791a7fd1bbf6ca1 class="flex justify-between"><a role=button>语言基础</a></label><ul><li><a href=/posts/go-memory-escape/>Go 内存逃逸</a></li><li><a href=/posts/go-gc/>Go GC 垃圾回收</a></li><li><a href=/posts/go-make-and-new/>Go make 与 new 区别</a></li><li><a href=/posts/go-gmp/>Go GMP 模型</a></li></ul></li><li><input type=checkbox id=section-42d8c4148cb4c5a3e3d8addaded05197 class=toggle>
<label for=section-42d8c4148cb4c5a3e3d8addaded05197 class="flex justify-between"><a role=button>数据结构</a></label><ul><li><a href=/posts/go-interface/>Go interface</a></li><li><a href=/posts/go-chan/>Go channel</a></li></ul></li><li><input type=checkbox id=section-1ca588caf6263863db394d8b5e8e27c7 class=toggle>
<label for=section-1ca588caf6263863db394d8b5e8e27c7 class="flex justify-between"><a role=button>标准库</a></label><ul></ul></li><li><input type=checkbox id=section-241d5557475d85971162af97f6d52ccb class=toggle>
<label for=section-241d5557475d85971162af97f6d52ccb class="flex justify-between"><a role=button>三方库</a></label><ul><li><a href=/posts/sqlx-vs-xorm/>sqlx vs xorm</a></li></ul></li><li><input type=checkbox id=section-da889a16058efe316dfcb82b9003429e class=toggle>
<label for=section-da889a16058efe316dfcb82b9003429e class="flex justify-between"><a role=button>开发工具</a></label><ul><li><a href=/posts/go-delve/>Go Delve</a></li><li><a href=/posts/go-testing/>Go Testing</a></li></ul></li><li><input type=checkbox id=section-fcb09aa495225b08f1e972b051618bb6 class=toggle>
<label for=section-fcb09aa495225b08f1e972b051618bb6 class="flex justify-between"><a role=button>其他</a></label><ul><li><a href=/posts/solve-timezone-issue-in-go-application-in-container/>Go应用在容器中的时区</a></li><li><a href=/posts/go-app-reduce-size/>减小go程序编译后的体积</a></li></ul></li></ul></li><li><input type=checkbox id=section-f91fe725fab4dcbef0dd504359ff7b63 class=toggle checked>
<label for=section-f91fe725fab4dcbef0dd504359ff7b63 class="flex justify-between"><a role=button>Linux</a></label><ul><li><input type=checkbox id=section-176ad016ae09a9f0440dca17617492cb class=toggle>
<label for=section-176ad016ae09a9f0440dca17617492cb class="flex justify-between"><a role=button>Network</a></label><ul><li><a href=/posts/openwrt-v2/>OpenWrt v2</a></li><li><a href=/posts/linux-iptables/>Linux iptables</a></li><li><a href=/posts/linux-bridge/>Linux Bridge</a></li><li><a href=/posts/wireless-to-wired-network/>无线转有线网络</a></li><li><a href=/posts/openwrt/>OpenWrt</a></li><li><a href=/posts/dhclient/>dhclient 问题</a></li><li><a href=/posts/creating-a-bridged-network-with-netplan-on-ubuntu-22-04/>在 Ubuntu 22.04 使用 netplan 创建桥接网络</a></li></ul></li><li><input type=checkbox id=section-33e3a313f4903205bd4597f5f4045be9 class=toggle>
<label for=section-33e3a313f4903205bd4597f5f4045be9 class="flex justify-between"><a role=button>OS</a></label><ul><li><a href=/posts/netpoll/>Netpoll</a></li><li><a href=/posts/linux-boot-process-bios/>Linux 启动流程 (BIOS)</a></li><li><a href=/posts/multi-bootable-usb/>Multi-Bootable USB</a></li></ul></li><li><input type=checkbox id=section-3b63411eed8d0cecdd3250e70daaaace class=toggle>
<label for=section-3b63411eed8d0cecdd3250e70daaaace class="flex justify-between"><a role=button>Storage</a></label><ul><li><a href=/posts/procfs/>proc filesystem</a></li><li><a href=/posts/partitioning-disks/>Linux 磁盘分区</a></li><li><a href=/posts/inode/>Linux 文件系统之 inode</a></li><li><a href=/posts/delete-partition-and-expand-another/>删除分区并扩容另一个分区和根文件系统</a></li></ul></li><li><input type=checkbox id=section-244a9b038b0e0aa873cb558da61a18b1 class=toggle checked>
<label for=section-244a9b038b0e0aa873cb558da61a18b1 class="flex justify-between"><a role=button class=active>其他</a></label><ul><li><a href=/posts/tmux/>tmux 使用笔记</a></li><li><a href=/posts/filebrowser/>Filebrowser 部署</a></li><li><a href=/posts/rclone/>Rclone 使用笔记</a></li><li><a href=/posts/shell-script/>Shell Script</a></li><li><a href=/posts/ubuntu-config/>Ubuntu Config</a></li><li><a href=/posts/systemd-journal/>About Systemd</a></li></ul></li></ul></li><li><input type=checkbox id=section-db6ac5e9808e911c643d4dada0e07ebd class=toggle>
<label for=section-db6ac5e9808e911c643d4dada0e07ebd class="flex justify-between"><a role=button>Kubernetes</a></label><ul><li><a href=/posts/k8s-informer/>k8s informer 介绍</a></li><li><a href=/posts/flannel/>深入了解 Kubernetes CNI 网络插件 Flannel</a></li><li><a href=/posts/kube-scheduler/>Kube Scheduler</a></li><li><a href=/posts/cri/>CRI 工作原理</a></li><li><a href=/posts/cni/>CNI 工作原理</a></li><li><a href=/posts/csi/>CSI 工作原理</a></li><li><a href=/posts/builing-multi-platform-container-images-guide/>构建多平台容器镜像</a></li><li><a href=/posts/k8s-namespace/>k8s namespaces</a></li><li><a href=/posts/k8s-cgroup/>k8s cgroups</a></li><li><a href=/posts/rke2/>RKE2 安装 k8s 集群</a></li><li><a href=/posts/controller-runtime/>Controller Runtime</a></li><li><input type=checkbox id=section-8edd6114a0c1ce280c6628362e538ba7 class=toggle>
<label for=section-8edd6114a0c1ce280c6628362e538ba7 class="flex justify-between"><a role=button>问题记录</a></label><ul><li><a href=/posts/failed-to-reserve-sandbox-name/>failed to reserve sandbox name</a></li></ul></li></ul></li><li><input type=checkbox id=section-45ed28834a9c7fe37d3e4d15606fec65 class=toggle>
<label for=section-45ed28834a9c7fe37d3e4d15606fec65 class="flex justify-between"><a role=button>Database</a></label><ul><li><a href=/posts/sqlite3/>SQLite3</a></li></ul></li><li><span>Virtualization</span><ul><li><input type=checkbox id=section-7c5a43731ddd199a055dda51c8660688 class=toggle>
<label for=section-7c5a43731ddd199a055dda51c8660688 class="flex justify-between"><a role=button>KubeVirt</a></label><ul><li><a href=/posts/kubevirt-sidecar/>Kubevirt Hook Sidecar</a></li></ul></li><li><input type=checkbox id=section-01c36c077fb673b3c49c2a334c82e286 class=toggle>
<label for=section-01c36c077fb673b3c49c2a334c82e286 class="flex justify-between"><a role=button>libvirt</a></label><ul><li><a href=/posts/libvirt/>Libvirt 使用笔记</a></li><li><a href=/posts/create-vm-with-cloudinit/>创建虚拟机时使用 cloudinit 初始化</a></li></ul></li></ul></li><li><input type=checkbox id=section-51c4e989897e79573c9215830bc89f6c class=toggle>
<label for=section-51c4e989897e79573c9215830bc89f6c class="flex justify-between"><a role=button>Prometheus</a></label><ul><li><a href=/posts/prometheus-basics/>Prometheus 基础</a></li><li><a href=/posts/kube-prometheus-stack/>kube-prometheus-stack 安装</a></li><li><a href=/posts/node-exporter/>node-exporter 安装</a></li></ul></li><li><input type=checkbox id=section-3dd648d0479248759f2c07b8d5ee80be class=toggle>
<label for=section-3dd648d0479248759f2c07b8d5ee80be class="flex justify-between"><a role=button>Ceph</a></label><ul><li><a href=/posts/rook-ceph/>安装 Rook Ceph</a></li></ul></li><li><input type=checkbox id=section-ba2b1bb537fff210d58a51efd7bbb7f9 class=toggle>
<label for=section-ba2b1bb537fff210d58a51efd7bbb7f9 class="flex justify-between"><a role=button>LeetCode</a></label><ul><li><input type=checkbox id=section-3ef90a077ef0405107c088f6e344d4df class=toggle>
<label for=section-3ef90a077ef0405107c088f6e344d4df class="flex justify-between"><a role=button>链表</a></label><ul><li><a href=/posts/reverse-nodes-in-k-group/>25. K 个一组翻转链表</a></li></ul></li></ul></li><li><input type=checkbox id=section-bceaf15d0fd4d92497330a70b95e69d1 class=toggle>
<label for=section-bceaf15d0fd4d92497330a70b95e69d1 class="flex justify-between"><a role=button>其他</a></label><ul><li><a href=/posts/vscode-extensions/>Vscode Extensions</a></li><li><a href=/posts/macos-config/>MacOS Config</a></li><li><a href=/posts/vim-tricks/>Vim Tricks</a></li><li><a href=/posts/git-tricks/>Git Tricks</a></li></ul></li></ul></li><li><a href=/about/>关于我</a><ul></ul></li><li><a href=/links/>友链</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>其他</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav><ul><li class=book-section-flat><strong>Categories</strong><ul></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/linux/>Linux</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/>系统编程</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/>系统调用</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/>进程管理</a>
<span>1</span></li></ul></li></ul></nav></aside></header><article class="markdown book-post"><h2><a href=/posts/tmux/>tmux 使用笔记</a></h2><div class="flex align-center text-small book-post-date"><img src=/svg/calendar.svg class=book-icon alt>
<span>2025-05-11</span></div><div class=book-post-content><p><code>tmux</code> 是一个强大的终端复用工具，可以在一个终端窗口中管理多个会话、窗口和窗格。<strong>一个令我相见恨晚的工具</strong>，下面记录一下安装和常用命令与快捷键。</p><h2 id=安装>安装
<a class=anchor href=#%e5%ae%89%e8%a3%85>#</a></h2><p>在 Debian / Ubuntu 使用 apt 安装</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt install tmux
</span></span></code></pre></div><p>在 MacOS 使用 brew 安装</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install tmux
</span></span></code></pre></div><h2 id=使用>使用
<a class=anchor href=#%e4%bd%bf%e7%94%a8>#</a></h2><p>以下是常用的快捷键和命令</p><blockquote><p>也可以用使用 <code>Ctrl+b ?</code> 查看所有快捷键</p></blockquote><h3 id=1-session-会话管理>1. session 会话管理
<a class=anchor href=#1-session-%e4%bc%9a%e8%af%9d%e7%ae%a1%e7%90%86>#</a></h3><table><thead><tr><th>功能</th><th>命令</th></tr></thead><tbody><tr><td>创建新 session 并指定名称</td><td><code>tmux new -s &lt;session-name></code></td></tr><tr><td>列出当前所有 session</td><td><code>tmux ls</code></td></tr></tbody></table><p>常用的几个 session 管理快捷键如下</p><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td>切换多个 session</td><td><code>Ctrl+b s</code></td></tr><tr><td>分离当前 session</td><td><code>Ctrl+b d</code></td></tr><tr><td>重命名当前 session</td><td><code>Ctrl+b $</code></td></tr></tbody></table><hr><h3 id=2-window-窗口管理>2. window 窗口管理
<a class=anchor href=#2-window-%e7%aa%97%e5%8f%a3%e7%ae%a1%e7%90%86>#</a></h3><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td>切换多个窗口</td><td><code>Ctrl+b w</code></td></tr><tr><td>切换到下一个窗口</td><td><code>Ctrl+b n</code></td></tr><tr><td>切换到前一个窗口</td><td><code>Ctrl+b p</code></td></tr><tr><td>创建一个新窗口</td><td><code>Ctrl+b c</code></td></tr><tr><td>给当前窗口命名</td><td><code>Ctrl+b ,</code></td></tr></tbody></table><hr><h3 id=3-pane-窗格管理>3. pane 窗格管理
<a class=anchor href=#3-pane-%e7%aa%97%e6%a0%bc%e7%ae%a1%e7%90%86>#</a></h3><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td>划分左右两个窗格</td><td><code>Ctrl+b %</code></td></tr><tr><td>划分上下两个窗格</td><td><code>Ctrl+b "</code></td></tr><tr><td>光标切换到其他窗格</td><td><code>Ctrl+b &lt;arrow key></code></td></tr><tr><td>调整窗格大小</td><td><code>Ctrl+b Ctrl+&lt;arrow key></code></td></tr><tr><td>关闭当前窗格</td><td><code>Ctrl+b x</code></td></tr><tr><td><strong>窗格内滚动查看</strong></td><td><code>Ctrl+b [</code></td></tr></tbody></table></div></article><article class="markdown book-post"><h2><a href=/posts/filebrowser/>Filebrowser 部署</a></h2><div class="flex align-center text-small book-post-date"><img src=/svg/calendar.svg class=book-icon alt>
<span>2025-03-30</span></div><div class=book-post-content><h2 id=filebrowser-介绍>Filebrowser 介绍
<a class=anchor href=#filebrowser-%e4%bb%8b%e7%bb%8d>#</a></h2><p><code>Filebrowser</code> 可以通过 web 管理指定文件目录, 并且支持多用户隔离在不同子目录下.</p><h2 id=filebrowser-部署在-k8s-中>Filebrowser 部署在 k8s 中
<a class=anchor href=#filebrowser-%e9%83%a8%e7%bd%b2%e5%9c%a8-k8s-%e4%b8%ad>#</a></h2><p>在 k8s 中部署 <a href=https://github.com/filebrowser/filebrowser>filebrowser</a></p><p>装完后默认密码 <code>admin</code> / <code>admin</code>, <a href=https://filebrowser.org/installation>File Browser Install</a></p><p>配置文件样例: <a href=https://github.com/filebrowser/filebrowser/blob/master/docker/root/defaults/settings.json>settings.json</a></p><p>关于数据持久化，都是持久化在 <code>ceph</code> 块存储中，使用 <code>sc/ceph-block</code></p><ul><li>数据库存储在 <code>pvc/filebrowser-database-pvc</code> 中，分配 <code>1Gi</code></li><li>文件目录存储在 <code>pvc/filebrowser-data-pvc</code> 中，分配 <code>50Gi</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Namespace</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ConfigMap</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-config</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>settings.json</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;port&#34;: 80,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;baseURL&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;address&#34;: &#34;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;log&#34;: &#34;stdout&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;database&#34;: &#34;/database/filebrowser.db&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;root&#34;: &#34;/srv&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>PersistentVolumeClaim</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-database-pvc</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>accessModes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ReadWriteOnce</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>storageClassName</span>: <span style=color:#ae81ff>ceph-block</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>requests</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>1Gi</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>PersistentVolumeClaim</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-data-pvc</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>accessModes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ReadWriteOnce</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>storageClassName</span>: <span style=color:#ae81ff>ceph-block</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>requests</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>50Gi</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>PUID</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;0&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>PGID</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;0&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>filebrowser/filebrowser:s6</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>volumeMounts</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-config</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/config</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-database</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/database</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-data</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/srv</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-config</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>configMap</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-config</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-database</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>persistentVolumeClaim</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>claimName</span>: <span style=color:#ae81ff>filebrowser-database-pvc</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-data</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>persistentVolumeClaim</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>claimName</span>: <span style=color:#ae81ff>filebrowser-data-pvc</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser-ingress</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>nginx.ingress.kubernetes.io/proxy-body-size</span>: <span style=color:#e6db74>&#34;0&#34;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>file.lan</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Prefix</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>filebrowser</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>port</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>number</span>: <span style=color:#ae81ff>80</span>
</span></span></code></pre></div></div></article><article class="markdown book-post"><h2><a href=/posts/rclone/>Rclone 使用笔记</a></h2><div class="flex align-center text-small book-post-date"><img src=/svg/calendar.svg class=book-icon alt>
<span>2024-04-04</span></div><div class=book-post-content><blockquote><p>使用<code>rclone</code>和<code>alist</code>提供的<code>webdav</code>接口将阿里云盘<code>mount</code>到Ubuntu 22.04的目录上, 实现像访问本地文件一样访问阿里云盘内的文件</p></blockquote><h2 id=下载安装rclone>下载安装<code>rclone</code>
<a class=anchor href=#%e4%b8%8b%e8%bd%bd%e5%ae%89%e8%a3%85rclone>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://rclone.org/install.sh | bash
</span></span></code></pre></div><h2 id=配置rclone-config>配置<code>rclone config</code>
<a class=anchor href=#%e9%85%8d%e7%bd%aerclone-config>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># rclone config</span>
</span></span><span style=display:flex><span>No remotes found, make a new one?
</span></span><span style=display:flex><span>n<span style=color:#f92672>)</span> New remote
</span></span><span style=display:flex><span>s<span style=color:#f92672>)</span> Set configuration password
</span></span><span style=display:flex><span>q<span style=color:#f92672>)</span> Quit config
</span></span><span style=display:flex><span>n/s/q&gt; n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Enter name <span style=color:#66d9ef>for</span> new remote.
</span></span><span style=display:flex><span>name&gt; alist
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Option Storage.
</span></span><span style=display:flex><span>Type of storage to configure.
</span></span><span style=display:flex><span>Choose a number from below, or type in your own value.
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> / 1Fichier
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>fichier<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ae81ff>51</span> / WebDAV
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>webdav<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>Storage&gt; <span style=color:#ae81ff>51</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Option url.
</span></span><span style=display:flex><span>URL of http host to connect to.
</span></span><span style=display:flex><span>E.g. https://example.com.
</span></span><span style=display:flex><span>Enter a value.
</span></span><span style=display:flex><span>url&gt; http://alist.home.lan/dav/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Option vendor.
</span></span><span style=display:flex><span>Name of the WebDAV site/service/software you are using.
</span></span><span style=display:flex><span>Choose a number from below, or type in your own value.
</span></span><span style=display:flex><span>Press Enter to leave empty.
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span> / Fastmail Files
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>fastmail<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>2</span> / Nextcloud
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>nextcloud<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>3</span> / Owncloud
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>owncloud<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>4</span> / Sharepoint Online, authenticated by Microsoft account
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>sharepoint<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>5</span> / Sharepoint with NTLM authentication, usually self-hosted or on-premises
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>sharepoint-ntlm<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>6</span> / rclone WebDAV server to serve a remote over HTTP via the WebDAV protocol
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>rclone<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>7</span> / Other site/service or software
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>\ </span><span style=color:#f92672>(</span>other<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>vendor&gt; <span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Option user.
</span></span><span style=display:flex><span>User name.
</span></span><span style=display:flex><span>In <span style=color:#66d9ef>case</span> NTLM authentication is used, the username should be in the format <span style=color:#e6db74>&#39;Domain\User&#39;</span>.
</span></span><span style=display:flex><span>Enter a value. Press Enter to leave empty.
</span></span><span style=display:flex><span>user&gt; admin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Option pass.
</span></span><span style=display:flex><span>Password.
</span></span><span style=display:flex><span>Choose an alternative below. Press Enter <span style=color:#66d9ef>for</span> the default <span style=color:#f92672>(</span>n<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>y<span style=color:#f92672>)</span> Yes, type in my own password
</span></span><span style=display:flex><span>g<span style=color:#f92672>)</span> Generate random password
</span></span><span style=display:flex><span>n<span style=color:#f92672>)</span> No, leave this optional password blank <span style=color:#f92672>(</span>default<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>y/g/n&gt; y
</span></span><span style=display:flex><span>Enter the password:
</span></span><span style=display:flex><span>password:
</span></span><span style=display:flex><span>Confirm the password:
</span></span><span style=display:flex><span>password:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Option bearer_token.
</span></span><span style=display:flex><span>Bearer token instead of user/pass <span style=color:#f92672>(</span>e.g. a Macaroon<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>Enter a value. Press Enter to leave empty.
</span></span><span style=display:flex><span>bearer_token&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Edit advanced config?
</span></span><span style=display:flex><span>y<span style=color:#f92672>)</span> Yes
</span></span><span style=display:flex><span>n<span style=color:#f92672>)</span> No <span style=color:#f92672>(</span>default<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>y/n&gt; n
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Configuration complete.
</span></span><span style=display:flex><span>Options:
</span></span><span style=display:flex><span>- type: webdav
</span></span><span style=display:flex><span>- url: http://alist.home.lan/dav/
</span></span><span style=display:flex><span>- vendor: other
</span></span><span style=display:flex><span>- user: admin
</span></span><span style=display:flex><span>- pass: *** ENCRYPTED ***
</span></span><span style=display:flex><span>Keep this <span style=color:#e6db74>&#34;alist&#34;</span> remote?
</span></span><span style=display:flex><span>y<span style=color:#f92672>)</span> Yes this is OK <span style=color:#f92672>(</span>default<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>e<span style=color:#f92672>)</span> Edit this remote
</span></span><span style=display:flex><span>d<span style=color:#f92672>)</span> Delete this remote
</span></span><span style=display:flex><span>y/e/d&gt; y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Current remotes:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Name                 Type
</span></span><span style=display:flex><span><span style=color:#f92672>====</span>                 <span style=color:#f92672>====</span>
</span></span><span style=display:flex><span>alist                webdav
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>e<span style=color:#f92672>)</span> Edit existing remote
</span></span><span style=display:flex><span>n<span style=color:#f92672>)</span> New remote
</span></span><span style=display:flex><span>d<span style=color:#f92672>)</span> Delete remote
</span></span><span style=display:flex><span>r<span style=color:#f92672>)</span> Rename remote
</span></span><span style=display:flex><span>c<span style=color:#f92672>)</span> Copy remote
</span></span><span style=display:flex><span>s<span style=color:#f92672>)</span> Set configuration password
</span></span><span style=display:flex><span>q<span style=color:#f92672>)</span> Quit config
</span></span><span style=display:flex><span>e/n/d/r/c/s/q&gt; q
</span></span></code></pre></div><h3 id=查看有哪些remote>查看有哪些remote
<a class=anchor href=#%e6%9f%a5%e7%9c%8b%e6%9c%89%e5%93%aa%e4%ba%9bremote>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># rclone listremotes</span>
</span></span><span style=display:flex><span>alist:
</span></span></code></pre></div><h3 id=查看某个remote下的目录或文件>查看某个<code>remote</code>下的目录或文件
<a class=anchor href=#%e6%9f%a5%e7%9c%8b%e6%9f%90%e4%b8%aaremote%e4%b8%8b%e7%9a%84%e7%9b%ae%e5%bd%95%e6%88%96%e6%96%87%e4%bb%b6>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># rclone lsd alist:/ali/video/诛仙</span>
</span></span><span style=display:flex><span>          -1 2024-04-02 12:27:23        -1 诛仙.第1季.2022-2023.4K.全26集
</span></span><span style=display:flex><span>          -1 2024-04-02 12:27:24        -1 诛仙.第2季.2024
</span></span><span style=display:flex><span><span style=color:#75715e># rclone ls alist:/ali/video/诛仙/诛仙.第2季.2024</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>959919343</span> 第27集-Zhu.Xian-2024-03-29-4k-HEVC-H265.AAC-WEB-DL.mkv
</span></span><span style=display:flex><span><span style=color:#ae81ff>995844543</span> 第28集-Zhu.Xian-2024-03-29-4K-HEVC-H265.AAC-WEB-DL.mkv
</span></span><span style=display:flex><span><span style=color:#ae81ff>1012470661</span> 第29集-Zhu.Xian-2024-03-29-4K-HEVC-H265.AAC-WEB-DL.mkv
</span></span></code></pre></div><h2 id=将alist-mount-到目录>将<code>alist</code> mount 到目录
<a class=anchor href=#%e5%b0%86alist-mount-%e5%88%b0%e7%9b%ae%e5%bd%95>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir -p /mnt/alist
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>777</span> /mnt/alist
</span></span><span style=display:flex><span><span style=color:#75715e># --header &#34;Referer:https://www.aliyundrive.com/&#34; 是必须要有的</span>
</span></span><span style=display:flex><span>rclone mount --cache-dir<span style=color:#f92672>=</span>/tmp --vfs-cache-mode<span style=color:#f92672>=</span>writes --header <span style=color:#e6db74>&#34;Referer:https://www.aliyundrive.com/&#34;</span> alist: /mnt/alist/
</span></span></code></pre></div><p>配置开机自动挂载</p><a href=/posts/rclone/>...</a></div></article><article class="markdown book-post"><h2><a href=/posts/shell-script/>Shell Script</a></h2><div class="flex align-center text-small book-post-date"><img src=/svg/calendar.svg class=book-icon alt>
<span>2024-03-23</span></div><div class=book-post-content><blockquote><p>最近写的shell脚本比较多，记录一些常用命令, 相当于记录一个索引, 以后用时可以快速回忆起来.</p></blockquote><h2 id=binbash><code>#!/bin/bash</code>
<a class=anchor href=#binbash>#</a></h2><p><code>#!/bin/bash</code>被称为<code>shebang line</code>, 指定执行此脚本文件时使用<code>/bin/bash</code>做为shell解释器程序</p><p>很多主流操作系统默认的shell解释器也是bash</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># echo $SHELL</span>
</span></span><span style=display:flex><span>/bin/bash
</span></span></code></pre></div><h2 id=set><code>set</code>
<a class=anchor href=#set>#</a></h2><p><code>set</code>命令用来修改shell环境的运行参数, 完整的可定制的<a href=https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html>官方手册</a></p><p>下面是我常用的几个, 可以合并为如下内容写在脚本开头:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set -uxe
</span></span><span style=display:flex><span>set -o pipefail
</span></span></code></pre></div><h3 id=set--u><code>set -u</code>
<a class=anchor href=#set--u>#</a></h3><p>执行脚本时, 如果遇到不存在的变量, Bash默认会忽略, <code>set -u</code>可以让脚本读到不存在变量时报错</p><h3 id=set--x><code>set -x</code>
<a class=anchor href=#set--x>#</a></h3><p>命令执行前会先打印出来, 行首以<code>+</code>表示, 在调试脚本时非常有帮助</p><h3 id=set--e><code>set -e</code>
<a class=anchor href=#set--e>#</a></h3><p>执行脚本时, Bash遇到错误默认会继续执行, <code>set -e</code>使得脚本只要发生错误, 就中止执行</p><h3 id=set--o-pipefail><code>set -o pipefail</code>
<a class=anchor href=#set--o-pipefail>#</a></h3><p><code>set -e</code>有一个例外情况, 就是不适用于管道命令, 比如下面的不会退出</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>set -e
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>foo | echo a
</span></span><span style=display:flex><span>echo bar
</span></span></code></pre></div><p>执行的结果为:</p><a href=/posts/shell-script/>...</a></div></article><article class="markdown book-post"><h2><a href=/posts/ubuntu-config/>Ubuntu Config</a></h2><div class="flex align-center text-small book-post-date"><img src=/svg/calendar.svg class=book-icon alt>
<span>2023-09-24</span></div><div class=book-post-content><blockquote><p>以下配置都是在 <code>Ubuntu 22.04</code> 系统配置</p></blockquote><h2 id=配置中文输入法>配置中文输入法
<a class=anchor href=#%e9%85%8d%e7%bd%ae%e4%b8%ad%e6%96%87%e8%be%93%e5%85%a5%e6%b3%95>#</a></h2><ol><li>Open Settings, go to <code>Region & Language</code> -> <code>Manage Installed Languages</code> -> <code>Install / Remove languages</code>.</li><li>Select <code>Chinese (Simplified)</code>. Make sure <code>Keyboard Input method system</code> has <code>Ibus</code> selected. Apply.</li><li>Reboot</li><li>Log back in, reopen Settings, go to <code>Keyboard</code>.</li><li>Click on the &ldquo;+&rdquo; sign under <code>Input sources</code>.</li><li>Select <code>Chinese (China)</code> and then <code>Chinese (Intelligent Pinyin)</code>.</li></ol><p><a href=https://askubuntu.com/questions/1408873/ubuntu-22-04-chinese-simplified-pinyin-input-support>ubuntu-22-04-chinese-simplified-pinyin-input-support</a></p><h2 id=修正简体中文显示为异体日文字形>修正简体中文显示为异体(日文)字形
<a class=anchor href=#%e4%bf%ae%e6%ad%a3%e7%ae%80%e4%bd%93%e4%b8%ad%e6%96%87%e6%98%be%e7%a4%ba%e4%b8%ba%e5%bc%82%e4%bd%93%e6%97%a5%e6%96%87%e5%ad%97%e5%bd%a2>#</a></h2><blockquote><p>ubuntu/linux对中文支持的不太好, 在选择汉字字体时, 优先选择的是日文或者韩文, 需要手动调整优先级后重启操作系统解决</p><a href=/posts/ubuntu-config/>...</a></div></article><article class="markdown book-post"><h2><a href=/posts/systemd-journal/>About Systemd</a></h2><div class="flex align-center text-small book-post-date"><img src=/svg/calendar.svg class=book-icon alt>
<span>2021-11-14</span></div><div class=book-post-content><p>记录一下查看和操作 <code>systemd</code> 日志的几个常用命令</p><h2 id=常用过滤日志日志的命令>常用过滤日志日志的命令
<a class=anchor href=#%e5%b8%b8%e7%94%a8%e8%bf%87%e6%bb%a4%e6%97%a5%e5%bf%97%e6%97%a5%e5%bf%97%e7%9a%84%e5%91%bd%e4%bb%a4>#</a></h2><h3 id=根据时间约束过滤日志>根据时间约束过滤日志
<a class=anchor href=#%e6%a0%b9%e6%8d%ae%e6%97%b6%e9%97%b4%e7%ba%a6%e6%9d%9f%e8%bf%87%e6%bb%a4%e6%97%a5%e5%bf%97>#</a></h3><h4 id=获取-2023-01-15-000000-之后的日志>获取 <code>2023-01-15 00:00:00</code> 之后的日志
<a class=anchor href=#%e8%8e%b7%e5%8f%96-2023-01-15-000000-%e4%b9%8b%e5%90%8e%e7%9a%84%e6%97%a5%e5%bf%97>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl --since <span style=color:#e6db74>&#39;2023-01-15 00:00:00&#39;</span>
</span></span></code></pre></div><h4 id=获取-2023-01-15-000000-之后-2023-01-15-120000-之前的日志>获取 <code>2023-01-15 00:00:00</code> 之后, <code>2023-01-15 12:00:00</code> 之前的日志
<a class=anchor href=#%e8%8e%b7%e5%8f%96-2023-01-15-000000-%e4%b9%8b%e5%90%8e-2023-01-15-120000-%e4%b9%8b%e5%89%8d%e7%9a%84%e6%97%a5%e5%bf%97>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl --since <span style=color:#e6db74>&#39;2023-01-15 00:00:00&#39;</span> --until <span style=color:#e6db74>&#39;2023-01-15 12:00:00&#39;</span>
</span></span></code></pre></div><h3 id=只查看一个服务unit的日志>只查看一个服务(Unit)的日志
<a class=anchor href=#%e5%8f%aa%e6%9f%a5%e7%9c%8b%e4%b8%80%e4%b8%aa%e6%9c%8d%e5%8a%a1unit%e7%9a%84%e6%97%a5%e5%bf%97>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl -u nginx
</span></span></code></pre></div><h3 id=自由组合约束条件>自由组合约束条件
<a class=anchor href=#%e8%87%aa%e7%94%b1%e7%bb%84%e5%90%88%e7%ba%a6%e6%9d%9f%e6%9d%a1%e4%bb%b6>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl -u nginx --since <span style=color:#e6db74>&#39;2023-01-15 00:00:00&#39;</span> --until <span style=color:#e6db74>&#39;2023-01-15 12:00:00&#39;</span>
</span></span></code></pre></div><h2 id=查看日志占用磁盘量>查看日志占用磁盘量
<a class=anchor href=#%e6%9f%a5%e7%9c%8b%e6%97%a5%e5%bf%97%e5%8d%a0%e7%94%a8%e7%a3%81%e7%9b%98%e9%87%8f>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl --disk-usage
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Output
</span></span><span style=display:flex><span>Archived and active journals take up 3.9G in the file system.
</span></span></code></pre></div><h2 id=删除旧的日志>删除旧的日志
<a class=anchor href=#%e5%88%a0%e9%99%a4%e6%97%a7%e7%9a%84%e6%97%a5%e5%bf%97>#</a></h2><h3 id=只保留最近-一个月-的日志>只保留最近 <code>一个月</code> 的日志
<a class=anchor href=#%e5%8f%aa%e4%bf%9d%e7%95%99%e6%9c%80%e8%bf%91-%e4%b8%80%e4%b8%aa%e6%9c%88-%e7%9a%84%e6%97%a5%e5%bf%97>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl --vacuum-time<span style=color:#f92672>=</span>1month
</span></span></code></pre></div><h3 id=只保留最近-1g-的日志>只保留最近 <code>1G</code> 的日志
<a class=anchor href=#%e5%8f%aa%e4%bf%9d%e7%95%99%e6%9c%80%e8%bf%91-1g-%e7%9a%84%e6%97%a5%e5%bf%97>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl --vacuum-size<span style=color:#f92672>=</span>1G
</span></span></code></pre></div><h2 id=列出所有systemd服务>列出所有systemd服务
<a class=anchor href=#%e5%88%97%e5%87%ba%e6%89%80%e6%9c%89systemd%e6%9c%8d%e5%8a%a1>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl list-units --type<span style=color:#f92672>=</span>service --all
</span></span></code></pre></div></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/go-bai/go-bai.github.io/commit/52e9a317e2ea3a0785571698961c607c1b640acd title='Last modified by go-bai | 2025-03-11' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt>
<span>2025-03-11</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav><ul><li class=book-section-flat><strong>Categories</strong><ul></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/linux/>Linux</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/>系统编程</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/>系统调用</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/>进程管理</a>
<span>1</span></li></ul></li></ul></nav></div></aside></main></body></html>