<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Network on gobai's notes</title><link>/posts/linux/network/</link><description>Recent content in Network on gobai's notes</description><generator>Hugo</generator><language>en-us</language><atom:link href="/posts/linux/network/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux iptables</title><link>/posts/linux-iptables/</link><pubDate>Sun, 02 Mar 2025 10:09:37 +0800</pubDate><guid>/posts/linux-iptables/</guid><description>&lt;blockquote>
&lt;p>持续更新&amp;hellip;&lt;/p>&lt;/blockquote>
&lt;h2 id="iptables-介绍">
 iptables 介绍
 &lt;a class="anchor" href="#iptables-%e4%bb%8b%e7%bb%8d">#&lt;/a>
&lt;/h2>
&lt;p>四表五链&lt;/p>
&lt;h3 id="五链">
 五链
 &lt;a class="anchor" href="#%e4%ba%94%e9%93%be">#&lt;/a>
&lt;/h3>
&lt;p>为什么称为 &lt;code>链&lt;/code>，因为每个 &lt;code>链&lt;/code> 会有很多规则串在一起，每个经过的报文都要将这条链上的规则匹配一遍，如果有符合条件的规则，则执行规则对应的动作。&lt;/p>
&lt;p>每个链会包含多个表的规则，如果包含对应的表，则表之间的执行顺序为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 具体每个表的作用看后面的 &amp;#34;四表&amp;#34; 介绍, 不是每个 &amp;#34;链&amp;#34; 都能包含全部的四个表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>raw -&amp;gt; mangle -&amp;gt; nat -&amp;gt; filter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="prerouting-链">
 PREROUTING 链
 &lt;a class="anchor" href="#prerouting-%e9%93%be">#&lt;/a>
&lt;/h4>
&lt;p>数据包抵达系统内核空间时，由 PREROUTING 链负责&lt;/p>
&lt;h4 id="input-链">
 INPUT 链
 &lt;a class="anchor" href="#input-%e9%93%be">#&lt;/a>
&lt;/h4>
&lt;p>进入内核空间后，如果检测到目的地址是本机，则由 INPUT 链负责&lt;/p>
&lt;h4 id="forward-链">
 FORWARD 链
 &lt;a class="anchor" href="#forward-%e9%93%be">#&lt;/a>
&lt;/h4>
&lt;p>数据包如果不是要到本机，只是经过本机路由，就由 FORWARD 链负责&lt;/p>
&lt;h4 id="output-链">
 OUTPUT 链
 &lt;a class="anchor" href="#output-%e9%93%be">#&lt;/a>
&lt;/h4>
&lt;p>数据包如果从本机出去，就由 OUTPUT 链负责&lt;/p>
&lt;h4 id="postrouting-链">
 POSTROUTING 链
 &lt;a class="anchor" href="#postrouting-%e9%93%be">#&lt;/a>
&lt;/h4>
&lt;p>从内核空间出到网卡硬件设备之前做处理&lt;/p>
&lt;p>数据包如果要离开本机，或者路由后，还有个 POSTROUTING 链负责&lt;/p>
&lt;h3 id="四表">
 四表
 &lt;a class="anchor" href="#%e5%9b%9b%e8%a1%a8">#&lt;/a>
&lt;/h3>
&lt;p>具有相同功能的规则的集合叫做 &lt;code>表&lt;/code>，iptables 定义了 四种表。&lt;/p></description></item><item><title>Linux Bridge</title><link>/posts/linux-bridge/</link><pubDate>Sun, 29 Dec 2024 15:40:46 +0800</pubDate><guid>/posts/linux-bridge/</guid><description>&lt;p>关于 Linux Bridge FDB&lt;/p></description></item><item><title>无线转有线网络</title><link>/posts/wireless-to-wired-network/</link><pubDate>Tue, 09 Apr 2024 22:16:24 +0800</pubDate><guid>/posts/wireless-to-wired-network/</guid><description>&lt;blockquote>
&lt;p>通过无线网卡连接网络&lt;code>A(192.168.31.0/24)&lt;/code>, 无线网卡相当于&lt;code>WAN&lt;/code>口，通过有线网卡接入网络&lt;code>B(192.168.1.0/24)&lt;/code>, 有线网卡相当于&lt;code>LAN&lt;/code>口&lt;/p>&lt;/blockquote>
&lt;h2 id="准备一个ubuntu虚拟机router">
 准备一个ubuntu虚拟机&lt;code>router&lt;/code>
 &lt;a class="anchor" href="#%e5%87%86%e5%a4%87%e4%b8%80%e4%b8%aaubuntu%e8%99%9a%e6%8b%9f%e6%9c%barouter">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 准备qcow2基础镜像&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget https://down.idc.wiki/Image/realServer-Template/current/qcow2/ubuntu22.qcow2 -O /var/lib/libvirt/images/ubuntu.qcow2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建虚拟机以基础镜像为backing file的增量盘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-img create -f qcow2 -F qcow2 -b /var/lib/libvirt/images/ubuntu.qcow2 /var/lib/libvirt/disks/router.qcow2 20G
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 创建并启动虚拟机&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>virt-install --name router --memory &lt;span style="color:#ae81ff">512&lt;/span> --vcpus &lt;span style="color:#ae81ff">1&lt;/span> --disk /var/lib/libvirt/disks/router.qcow2,bus&lt;span style="color:#f92672">=&lt;/span>sata --import --os-variant ubuntu22.10 --network bridge&lt;span style="color:#f92672">=&lt;/span>br0 --noautoconsole
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 设置自动启动&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>virsh autostart router
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="配置网络">
 配置网络
 &lt;a class="anchor" href="#%e9%85%8d%e7%bd%ae%e7%bd%91%e7%bb%9c">#&lt;/a>
&lt;/h2>
&lt;h3 id="将无线网卡透传进虚拟机">
 将无线网卡透传进虚拟机
 &lt;a class="anchor" href="#%e5%b0%86%e6%97%a0%e7%ba%bf%e7%bd%91%e5%8d%a1%e9%80%8f%e4%bc%a0%e8%bf%9b%e8%99%9a%e6%8b%9f%e6%9c%ba">#&lt;/a>
&lt;/h3>
&lt;p>打开 &lt;code>virt-manager&lt;/code> -&amp;gt; 双击 &lt;code>router domain&lt;/code> -&amp;gt; 点击 &lt;code>Show virtual hardware details&lt;/code> -&amp;gt; 点击 &lt;code>Add Hardware&lt;/code> -&amp;gt; 点击 &lt;code>PCI Host Device&lt;/code> -&amp;gt; 选择 &lt;code>Intel Corporation Wi-Fi 6 AX200&lt;/code> -&amp;gt; 点击 &lt;code>Finish&lt;/code>&lt;/p></description></item><item><title>OpenWrt</title><link>/posts/openwrt/</link><pubDate>Sat, 06 Jan 2024 17:38:38 +0800</pubDate><guid>/posts/openwrt/</guid><description>&lt;p>很久没折腾&lt;code>OpenWrt&lt;/code>了, 囊中羞涩, 没有其他合适的设备, 这次是在KVM虚机中运行使用(&lt;code>ALL IN BOOM!&lt;/code>)&lt;/p>
&lt;p>先亮个当前的穷人版家庭网络拓扑图&lt;/p>
&lt;p>&lt;img src="/linux/imgs/home-network-topology-diagram.svg" alt="穷人版家庭网络拓扑图" />&lt;/p>
&lt;h2 id="准备qcow2镜像">
 准备&lt;code>qcow2&lt;/code>镜像
 &lt;a class="anchor" href="#%e5%87%86%e5%a4%87qcow2%e9%95%9c%e5%83%8f">#&lt;/a>
&lt;/h2>
&lt;p>首先下载最新的&lt;a href="https://downloads.openwrt.org/releases">镜像&lt;/a>, 截止目前最新版为&lt;code>23.05.3&lt;/code>, 我这里下载的是x86-64的镜像&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>wget https://mirror-03.infra.openwrt.org/releases/23.05.3/targets/x86/64/openwrt-23.05.3-x86-64-generic-ext4-combined.img.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 解压&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gunzip openwrt-23.05.3-x86-64-generic-ext4-combined.img.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 这里因为我要作为KVM虚拟机的镜像, 所以转换为qcow2格式. 如果是在物理机上部署, 可以直接直接刷到U盘上.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qemu-img convert -f raw openwrt-23.05.3-x86-64-generic-ext4-combined.img -O qcow2 /var/lib/libvirt/images/openwrt.qcow2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="运行虚机">
 运行虚机
 &lt;a class="anchor" href="#%e8%bf%90%e8%a1%8c%e8%99%9a%e6%9c%ba">#&lt;/a>
&lt;/h2>
&lt;p>我是用&lt;code>libvirt&lt;/code>来管理qemu/kvm虚拟机, 如果没安装要先安装&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>apt install virt-manager qemu bridge-utils -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我这里将镜像复制到了&lt;code>/var/lib/libvirt/disks/&lt;/code>目录下&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>qemu-img create -f qcow2 -F qcow2 -b /var/lib/libvirt/images/openwrt.qcow2 /var/lib/libvirt/disks/openwrt.qcow2 1G
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>使用&lt;code>virt-install&lt;/code>运行虚拟机, 这里网卡使用&lt;code>virtio&lt;/code>类型并桥接到之前文档里创建的&lt;code>br0&lt;/code>上,
选择&lt;code>virtio&lt;/code>是因为性能最好, 可以达到&lt;code>10Gbps&lt;/code>以上&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 运行, 这里网络指定的之前文章中创建的网桥网络br0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>virt-install &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --name openwrt &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --memory &lt;span style="color:#ae81ff">256&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --vcpus &lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --network bridge&lt;span style="color:#f92672">=&lt;/span>br0,model&lt;span style="color:#f92672">=&lt;/span>virtio &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --disk path&lt;span style="color:#f92672">=&lt;/span>/var/lib/libvirt/disks/openwrt.qcow2,bus&lt;span style="color:#f92672">=&lt;/span>ide &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --import &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --autostart &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --osinfo detect&lt;span style="color:#f92672">=&lt;/span>on,require&lt;span style="color:#f92672">=&lt;/span>off &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --noautoconsole
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="配置网络">
 配置网络
 &lt;a class="anchor" href="#%e9%85%8d%e7%bd%ae%e7%bd%91%e7%bb%9c">#&lt;/a>
&lt;/h2>
&lt;p>连接&lt;code>console&lt;/code>配置网络&lt;/p></description></item><item><title>dhclient</title><link>/posts/dhclient/</link><pubDate>Mon, 09 Oct 2023 21:37:55 +0800</pubDate><guid>/posts/dhclient/</guid><description>&lt;p>在机器上使用&lt;code>netplan&lt;/code>+&lt;code>NetworkManager&lt;/code>配置&lt;a href="../creating-a-bridged-network-with-netplan-on-ubuntu-22-04">bridged network&lt;/a>之后&lt;/p>
&lt;p>最近经常电脑用着用着就不能联网了，发现&lt;code>enp1s0&lt;/code>总是偶尔冒出一个&lt;code>ipv4&lt;/code>地址，并且路由表会多出一个从&lt;code>enp1s0&lt;/code>出去的&lt;code>default&lt;/code>路由。后来看&lt;code>journalctl&lt;/code>日志发现是&lt;code>dhclient&lt;/code>搞的事情(学艺不精, 没第一时间联系起来)。&lt;/p>
&lt;p>下面是部分日志：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>➜ ~ journalctl -n &lt;span style="color:#ae81ff">1000000&lt;/span> | grep &lt;span style="color:#e6db74">&amp;#39;192.168.1.22\|enp1s0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:25 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>107299&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x4745a8ce&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:26 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>73666&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x2cfc74b3&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:26 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>157839&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x453b8549&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:28 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>170251&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x334a15e8&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:28 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>237127&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x7fd24947&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307826&lt;span style="color:#f92672">]&lt;/span>: Found user &lt;span style="color:#e6db74">&amp;#39;avahi-autoipd&amp;#39;&lt;/span> &lt;span style="color:#f92672">(&lt;/span>UID 110&lt;span style="color:#f92672">)&lt;/span> and group &lt;span style="color:#e6db74">&amp;#39;avahi-autoipd&amp;#39;&lt;/span> &lt;span style="color:#f92672">(&lt;/span>GID 119&lt;span style="color:#f92672">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307826&lt;span style="color:#f92672">]&lt;/span>: Successfully called chroot&lt;span style="color:#f92672">()&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307826&lt;span style="color:#f92672">]&lt;/span>: Successfully dropped root privileges.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307826&lt;span style="color:#f92672">]&lt;/span>: Starting with address 169.254.4.220
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307826&lt;span style="color:#f92672">]&lt;/span>: Got SIGTERM, quitting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>170251&lt;span style="color:#f92672">]&lt;/span>: DHCPDISCOVER on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> interval &lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x1f69d35f&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>170251&lt;span style="color:#f92672">]&lt;/span>: DHCPOFFER of 192.168.1.22 from 192.168.1.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>170251&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x5fd3691f&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>170251&lt;span style="color:#f92672">]&lt;/span>: DHCPACK of 192.168.1.22 from 192.168.1.1 &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x1f69d35f&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Joining mDNS multicast group on interface enp1s0.IPv4 with address 192.168.1.22.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: New relevant interface enp1s0.IPv4 &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Registering new address record &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0.IPv4.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER systemd-resolved&lt;span style="color:#f92672">[&lt;/span>237121&lt;span style="color:#f92672">]&lt;/span>: enp1s0: Bus client set search domain list to: home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>157839&lt;span style="color:#f92672">]&lt;/span>: DHCPDISCOVER on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> interval &lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x41cc913f&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER systemd-resolved&lt;span style="color:#f92672">[&lt;/span>237121&lt;span style="color:#f92672">]&lt;/span>: enp1s0: Bus client set DNS server list to: 192.168.1.1, 223.5.5.5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>157839&lt;span style="color:#f92672">]&lt;/span>: DHCPOFFER of 192.168.1.22 from 192.168.1.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>157839&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x3f91cc41&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>157839&lt;span style="color:#f92672">]&lt;/span>: DHCPACK of 192.168.1.22 from 192.168.1.1 &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x41cc913f&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>170251&lt;span style="color:#f92672">]&lt;/span>: bound to 192.168.1.22 -- renewal in &lt;span style="color:#ae81ff">32921&lt;/span> seconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:32 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>157839&lt;span style="color:#f92672">]&lt;/span>: bound to 192.168.1.22 -- renewal in &lt;span style="color:#ae81ff">36989&lt;/span> seconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Withdrawing address record &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Leaving mDNS multicast group on interface enp1s0.IPv4 with address 192.168.1.22.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Interface enp1s0.IPv4 no longer relevant &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307982&lt;span style="color:#f92672">]&lt;/span>: Found user &lt;span style="color:#e6db74">&amp;#39;avahi-autoipd&amp;#39;&lt;/span> &lt;span style="color:#f92672">(&lt;/span>UID 110&lt;span style="color:#f92672">)&lt;/span> and group &lt;span style="color:#e6db74">&amp;#39;avahi-autoipd&amp;#39;&lt;/span> &lt;span style="color:#f92672">(&lt;/span>GID 119&lt;span style="color:#f92672">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307982&lt;span style="color:#f92672">]&lt;/span>: Successfully called chroot&lt;span style="color:#f92672">()&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307982&lt;span style="color:#f92672">]&lt;/span>: Successfully dropped root privileges.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307982&lt;span style="color:#f92672">]&lt;/span>: Starting with address 169.254.4.220
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:35 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>307982&lt;span style="color:#f92672">]&lt;/span>: Got SIGTERM, quitting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>73666&lt;span style="color:#f92672">]&lt;/span>: DHCPDISCOVER on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> interval &lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x50a89e0e&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>73666&lt;span style="color:#f92672">]&lt;/span>: DHCPOFFER of 192.168.1.22 from 192.168.1.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>73666&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0xe9ea850&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>73666&lt;span style="color:#f92672">]&lt;/span>: DHCPACK of 192.168.1.22 from 192.168.1.1 &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x50a89e0e&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Joining mDNS multicast group on interface enp1s0.IPv4 with address 192.168.1.22.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: New relevant interface enp1s0.IPv4 &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Registering new address record &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0.IPv4.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER systemd-resolved&lt;span style="color:#f92672">[&lt;/span>237121&lt;span style="color:#f92672">]&lt;/span>: enp1s0: Bus client set search domain list to: home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER systemd-resolved&lt;span style="color:#f92672">[&lt;/span>237121&lt;span style="color:#f92672">]&lt;/span>: enp1s0: Bus client set DNS server list to: 192.168.1.1, 223.5.5.5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>73666&lt;span style="color:#f92672">]&lt;/span>: bound to 192.168.1.22 -- renewal in &lt;span style="color:#ae81ff">34351&lt;/span> seconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>107299&lt;span style="color:#f92672">]&lt;/span>: DHCPDISCOVER on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> interval &lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x27725347&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>107299&lt;span style="color:#f92672">]&lt;/span>: DHCPOFFER of 192.168.1.22 from 192.168.1.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>107299&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x47537227&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>107299&lt;span style="color:#f92672">]&lt;/span>: DHCPACK of 192.168.1.22 from 192.168.1.1 &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x27725347&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>107299&lt;span style="color:#f92672">]&lt;/span>: bound to 192.168.1.22 -- renewal in &lt;span style="color:#ae81ff">40122&lt;/span> seconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Withdrawing address record &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Leaving mDNS multicast group on interface enp1s0.IPv4 with address 192.168.1.22.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Interface enp1s0.IPv4 no longer relevant &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Found user &lt;span style="color:#e6db74">&amp;#39;avahi-autoipd&amp;#39;&lt;/span> &lt;span style="color:#f92672">(&lt;/span>UID 110&lt;span style="color:#f92672">)&lt;/span> and group &lt;span style="color:#e6db74">&amp;#39;avahi-autoipd&amp;#39;&lt;/span> &lt;span style="color:#f92672">(&lt;/span>GID 119&lt;span style="color:#f92672">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Successfully called chroot&lt;span style="color:#f92672">()&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Successfully dropped root privileges.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:36 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Starting with address 169.254.4.220
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:42 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Callout BIND, address 169.254.4.220 on interface enp1s0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:42 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Joining mDNS multicast group on interface enp1s0.IPv4 with address 169.254.4.220.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:42 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: New relevant interface enp1s0.IPv4 &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:42 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Registering new address record &lt;span style="color:#66d9ef">for&lt;/span> 169.254.4.220 on enp1s0.IPv4.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Successfully claimed IP address 169.254.4.220
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Got SIGTERM, quitting.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-autoipd&lt;span style="color:#f92672">(&lt;/span>enp1s0&lt;span style="color:#f92672">)[&lt;/span>308110&lt;span style="color:#f92672">]&lt;/span>: Callout STOP, address 169.254.4.220 on interface enp1s0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Withdrawing address record &lt;span style="color:#66d9ef">for&lt;/span> 169.254.4.220 on enp1s0.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Leaving mDNS multicast group on interface enp1s0.IPv4 with address 169.254.4.220.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Interface enp1s0.IPv4 no longer relevant &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>237127&lt;span style="color:#f92672">]&lt;/span>: DHCPDISCOVER on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> interval &lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x389e944d&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>237127&lt;span style="color:#f92672">]&lt;/span>: DHCPOFFER of 192.168.1.22 from 192.168.1.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>237127&lt;span style="color:#f92672">]&lt;/span>: DHCPREQUEST &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0 to 255.255.255.255 port &lt;span style="color:#ae81ff">67&lt;/span> &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x4d949e38&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>237127&lt;span style="color:#f92672">]&lt;/span>: DHCPACK of 192.168.1.22 from 192.168.1.1 &lt;span style="color:#f92672">(&lt;/span>xid&lt;span style="color:#f92672">=&lt;/span>0x389e944d&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Joining mDNS multicast group on interface enp1s0.IPv4 with address 192.168.1.22.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: New relevant interface enp1s0.IPv4 &lt;span style="color:#66d9ef">for&lt;/span> mDNS.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:46 gobai-SER avahi-daemon&lt;span style="color:#f92672">[&lt;/span>588&lt;span style="color:#f92672">]&lt;/span>: Registering new address record &lt;span style="color:#66d9ef">for&lt;/span> 192.168.1.22 on enp1s0.IPv4.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:47 gobai-SER systemd-resolved&lt;span style="color:#f92672">[&lt;/span>237121&lt;span style="color:#f92672">]&lt;/span>: enp1s0: Bus client set search domain list to: home
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:47 gobai-SER systemd-resolved&lt;span style="color:#f92672">[&lt;/span>237121&lt;span style="color:#f92672">]&lt;/span>: enp1s0: Bus client set DNS server list to: 192.168.1.1, 223.5.5.5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>10月 &lt;span style="color:#ae81ff">09&lt;/span> 20:14:47 gobai-SER dhclient&lt;span style="color:#f92672">[&lt;/span>237127&lt;span style="color:#f92672">]&lt;/span>: bound to 192.168.1.22 -- renewal in &lt;span style="color:#ae81ff">40782&lt;/span> seconds.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>➜ ~ ps -aux | grep dhclient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root &lt;span style="color:#ae81ff">73666&lt;/span> 0.0 0.0 &lt;span style="color:#ae81ff">101232&lt;/span> &lt;span style="color:#ae81ff">6228&lt;/span> ? Ssl 9月28 0:15 dhclient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root &lt;span style="color:#ae81ff">107299&lt;/span> 0.0 0.0 &lt;span style="color:#ae81ff">101232&lt;/span> &lt;span style="color:#ae81ff">6228&lt;/span> ? Ssl 10月04 0:09 dhclient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root &lt;span style="color:#ae81ff">157839&lt;/span> 0.0 0.0 &lt;span style="color:#ae81ff">101232&lt;/span> &lt;span style="color:#ae81ff">6112&lt;/span> ? Ssl 10月06 0:06 dhclient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root &lt;span style="color:#ae81ff">170251&lt;/span> 0.0 0.0 &lt;span style="color:#ae81ff">101232&lt;/span> &lt;span style="color:#ae81ff">6184&lt;/span> ? Ssl 10月06 0:08 dhclient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root &lt;span style="color:#ae81ff">237127&lt;/span> 0.0 0.0 &lt;span style="color:#ae81ff">101232&lt;/span> &lt;span style="color:#ae81ff">6012&lt;/span> ? Ssl 10月07 0:06 dhclient
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gobai &lt;span style="color:#ae81ff">322905&lt;/span> 0.0 0.0 &lt;span style="color:#ae81ff">12308&lt;/span> &lt;span style="color:#ae81ff">2816&lt;/span> pts/5 S+ 21:49 0:00 grep --color&lt;span style="color:#f92672">=&lt;/span>auto --exclude-dir&lt;span style="color:#f92672">=&lt;/span>.bzr --exclude-dir&lt;span style="color:#f92672">=&lt;/span>CVS --exclude-dir&lt;span style="color:#f92672">=&lt;/span>.git --exclude-dir&lt;span style="color:#f92672">=&lt;/span>.hg --exclude-dir&lt;span style="color:#f92672">=&lt;/span>.svn --exclude-dir&lt;span style="color:#f92672">=&lt;/span>.idea --exclude-dir&lt;span style="color:#f92672">=&lt;/span>.tox dhclient
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>对比上面五个进程(&lt;code>DHCP Client&lt;/code>)和日志发现，五个进程都干了同样的事：&lt;/p></description></item><item><title>在 Ubuntu 22.04 使用 netplan 创建桥接网络</title><link>/posts/creating-a-bridged-network-with-netplan-on-ubuntu-22-04/</link><pubDate>Wed, 04 Oct 2023 13:01:59 +0800</pubDate><guid>/posts/creating-a-bridged-network-with-netplan-on-ubuntu-22-04/</guid><description>&lt;p>本地LAN环境&lt;/p>
&lt;ol>
&lt;li>LAN网关 &lt;code>192.168.1.1&lt;/code>&lt;/li>
&lt;li>子网掩码 &lt;code>255.255.255.0&lt;/code>&lt;/li>
&lt;li>DHCP范围 &lt;code>192.168.1.2&lt;/code>-&lt;code>192.168.32&lt;/code>&lt;/li>
&lt;/ol>
&lt;h2 id="创建一个bridged-network">
 创建一个&lt;code>bridged network&lt;/code>
 &lt;a class="anchor" href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aabridged-network">#&lt;/a>
&lt;/h2>
&lt;p>创建一个网桥&lt;code>br0&lt;/code>给虚机使用，使得虚机和其他设备都在一个LAN下&lt;/p>
&lt;p>总配置(&lt;code>netplan get&lt;/code>)如下:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">renderer&lt;/span>: &lt;span style="color:#ae81ff">NetworkManager&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ethernets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">enp1s0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp4&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp6&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">bridges&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">br0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;192.168.1.100/24&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nameservers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">192.168.1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp4&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp6&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">interfaces&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">enp1s0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">parameters&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">stp&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">routes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">to&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">via&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;192.168.1.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>由三个文件组成:&lt;/p>
&lt;ol>
&lt;li>&lt;code>/etc/netplan/01-network-manager-all.yaml&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Let NetworkManager manage all devices on this system&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">renderer&lt;/span>: &lt;span style="color:#ae81ff">NetworkManager&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>&lt;code>/etc/netplan/10-ethernet-enp1s0.yaml&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ethernets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">enp1s0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp4&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp6&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>&lt;code>/etc/netplan/99-bridged-network-br0.yaml&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">bridges&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">br0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp4&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp6&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">192.168.1.100&lt;/span>&lt;span style="color:#ae81ff">/24&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">routes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">to&lt;/span>: &lt;span style="color:#ae81ff">default&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">via&lt;/span>: &lt;span style="color:#ae81ff">192.168.1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nameservers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>: 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">192.168.1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">223.5.5.5&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">interfaces&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">enp1s0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">parameters&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">stp&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="应用网络配置">
 应用网络配置
 &lt;a class="anchor" href="#%e5%ba%94%e7%94%a8%e7%bd%91%e7%bb%9c%e9%85%8d%e7%bd%ae">#&lt;/a>
&lt;/h2>
&lt;p>容易失联，如果是ssh远程操作请谨慎操作&lt;/p></description></item></channel></rss>