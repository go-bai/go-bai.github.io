<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Kube-Prometheus-Stack on gobai's blog</title><link>/tags/kube-prometheus-stack/</link><description>Recent content in Kube-Prometheus-Stack on gobai's blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 03 Jul 2024 14:56:03 +0800</lastBuildDate><atom:link href="/tags/kube-prometheus-stack/index.xml" rel="self" type="application/rss+xml"/><item><title>安装 Kube Prometheus Stack</title><link>/posts/kube-prometheus-stack/</link><pubDate>Wed, 03 Jul 2024 14:56:03 +0800</pubDate><guid>/posts/kube-prometheus-stack/</guid><description>&lt;h2 id="安装-kube-prometheus-stack">安装 kube-prometheus-stack&lt;/h2>
&lt;p>使用 helm charts 安装 kube-prometheus-stack&lt;/p>
&lt;pre>&lt;code class="language-bash">mkdir -p ~/charts/kube-prometheus-stack
cd ~/charts/kube-prometheus-stack
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update
# values.yaml 用来查看默认值
helm show values prometheus-community/kube-prometheus-stack &amp;gt; values.yaml
cat &amp;lt;&amp;lt;EOF &amp;gt; custom-values.yaml
prometheus:
 prometheusSpec:
 additionalScrapeConfigs: []
 service:
 type: NodePort

# grafana service
grafana:
 service:
 type: NodePort

alertmanager:
 enabled: false
EOF
helm upgrade --install --create-namespace --namespace monitoring kube-prometheus-stack prometheus-community/kube-prometheus-stack -f custom-values.yaml
&lt;/code>&lt;/pre>
&lt;h2 id="配置-grafana-dashboard">配置 grafana dashboard&lt;/h2>
&lt;p>导入一个查看 node exporter 的 dashboard&lt;/p></description></item></channel></rss>