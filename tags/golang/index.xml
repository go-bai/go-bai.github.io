<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Golang on gobai's blog</title><link>/tags/golang/</link><description>Recent content in Golang on gobai's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 09 Mar 2024 10:49:09 +0800</lastBuildDate><atom:link href="/tags/golang/index.xml" rel="self" type="application/rss+xml"/><item><title>sqlx vs xorm</title><link>/posts/sqlx-vs-xorm/</link><pubDate>Sat, 09 Mar 2024 10:49:09 +0800</pubDate><guid>/posts/sqlx-vs-xorm/</guid><description>åˆå§‹åŒ–æ¼”ç¤ºç¯å¢ƒ ä½¿ç”¨dockeréƒ¨ç½² éƒ¨ç½²çš„å½“å‰æ—¶é—´æœ€æ–°ç‰ˆæœ¬postgres:16.2
docker run -d --name pgsql \ -e POSTGRES_USER=admin \ -e POSTGRES_PASSWORD=passwd \ -e POSTGRES_DB=testdb \ -p 15432:5432 \ postgres:16.2 ä½¿ç”¨psqlè¿æ¥ docker exec -it pgsql psql -U admin -d testdb åˆå§‹åŒ–user,vpså’Œhostè¡¨ CREATE TABLE &amp;quot;user&amp;quot; ( id bigserial PRIMARY KEY, username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL ); CREATE TABLE &amp;quot;host&amp;quot; ( id bigserial PRIMARY KEY, hostname VARCHAR(255) NOT NULL ); CREATE TABLE &amp;quot;vps&amp;quot; ( id bigserial PRIMARY KEY, user_id bigint NOT NULL, host_id bigint NOT NULL, name VARCHAR(255) NOT NULL, sys_disk jsonb NOT NULL DEFAULT '{}' ); æŸ¥çœ‹åˆ›å»ºå‡ºçš„è¡¨ testdb=# \z Access privileges Schema | Name | Type | Access privileges | Column privileges | Policies --------+-------------+----------+-------------------+-------------------+---------- public | host | table | | | public | host_id_seq | sequence | | | public | user | table | | | public | user_id_seq | sequence | | | public | vps | table | | | public | vps_id_seq | sequence | | | (6 rows) testdb=# \d user Table &amp;quot;public.</description></item><item><title>è§£å†³Goåº”ç”¨åœ¨å®¹å™¨ä¸­çš„æ—¶åŒºé—®é¢˜</title><link>/posts/solve-timezone-issue-in-go-application-in-container/</link><pubDate>Sat, 18 Feb 2023 16:12:01 +0800</pubDate><guid>/posts/solve-timezone-issue-in-go-application-in-container/</guid><description>å®¹å™¨ä¸­çš„æ—¶åŒºé—®é¢˜ åº”ç”¨ç›´æ¥è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šéœ€è¦è®¾ç½®æœåŠ¡å™¨æ—¶åŒºä¸ºä¸œå…«åŒºï¼Œç°åœ¨å¾ˆå¤šåº”ç”¨éƒ½æ˜¯éƒ¨ç½²åœ¨å®¹å™¨ä¸­äº†ï¼ŒåŒæ ·ä¹Ÿæ˜¯è¦è®¾ç½®å®¹å™¨é•œåƒçš„æ—¶åŒºã€‚
è®¸å¤šå®¹å™¨é•œåƒé»˜è®¤æ—¶åŒºä¸º UTC (Coordinated Universal Time åè°ƒä¸–ç•Œæ—¶)ï¼Œæ¯”ä¸œå…«åŒºæ…¢å…«ä¸ªå°æ—¶ï¼Œå½“ç¨‹åºæ¶‰åŠæ•°æ®åº“å†™å…¥æ“ä½œæˆ–è€…æ—¥å¿—è®°å½•ç­‰åŠŸèƒ½æ—¶å°±ä¼šæœ‰æ—¶é—´å·®ã€‚
å¸¸è§„è§£å†³æ–¹æ¡ˆä¸€èˆ¬ä¸¤å¤§ç±»
build dockeré•œåƒæ—¶å°±æŠŠé•œåƒå†…çš„æ—¶åŒºè®¾ç½®ä¸º Asia/Shanghai è¿è¡Œå®¹å™¨æ—¶æŠŠæœ¬åœ°æ—¶åŒºæ­£å¸¸çš„ä¸»æœºçš„æ—¶åŒºé…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨ã€‚ çœ‹ä¸€ä¸‹ Go æ˜¯å¦‚ä½•è¯»å–æ—¶åŒºæ–‡ä»¶å¹¶è®¾ç½® time.Time çš„æ—¶åŒºçš„ Go æºç  src/time/zoneinfo_unix.go ä¸­ä»£ç å’Œæ³¨é‡Šéƒ½å¾ˆæ¸…æ™°ğŸ‘
package time import ( &amp;quot;syscall&amp;quot; ) // Many systems use /usr/share/zoneinfo, Solaris 2 has // /usr/share/lib/zoneinfo, IRIX 6 has /usr/lib/locale/TZ, // NixOS has /etc/zoneinfo. var platformZoneSources = []string{ &amp;quot;/usr/share/zoneinfo/&amp;quot;, &amp;quot;/usr/share/lib/zoneinfo/&amp;quot;, &amp;quot;/usr/lib/locale/TZ/&amp;quot;, &amp;quot;/etc/zoneinfo&amp;quot;, } func initLocal() { // consult $TZ to find the time zone to use. // no $TZ means use the system default /etc/localtime.</description></item><item><title>å‡å°goç¨‹åºç¼–è¯‘åçš„ä½“ç§¯</title><link>/posts/go-app-reduce-size/</link><pubDate>Mon, 22 Nov 2021 10:29:02 +0800</pubDate><guid>/posts/go-app-reduce-size/</guid><description>ç¼–è¯‘ç»å…¸ç¨‹åº ç¨‹åºä»£ç  package main import &amp;quot;fmt&amp;quot; func main() { fmt.Println(&amp;quot;Hello World.&amp;quot;) } ç¼–è¯‘ç¯å¢ƒ $ go version go version go1.16.7 linux/amd64 0. ç›´æ¥ç¼–è¯‘ $ go build -o helloword main.go $ ls -lh helloword -rwxrwxr-x 1 gobai gobai 1.9M Nov 23 09:34 helloword 1. ä¿®æ”¹ç¼–è¯‘é€‰é¡¹ é™¤å»ç¼–è¯‘æ—¶å¸¦çš„ç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯
$ go build -ldflags=&amp;quot;-s -w&amp;quot; -o helloword main.go $ ls -lh helloword -rwxrwxr-x 1 gobai gobai 1.3M Nov 23 09:38 helloword 2. ä½¿ç”¨ UPX å¯¹ç›´æ¥ç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶ä½¿ç”¨ upx è¿›ä¸€æ­¥å‹ç¼©</description></item></channel></rss>